import Pai
import JudgeRon
import numpy as np

# helper function
def showTesthand(test):
    hand = []
    for s in test[0]:
        for p in s:
            hand.append(p)
    ophand = []
    for s in test[1]:
        for p in s:
            ophand.append(p)
    return Pai.showHand(hand) + Pai.showHand(ophand)

# Unit Tests
def dasanyuanTest():
    case = [""]*8
    case[0] = [[[(27,0),(27,1),(27,3)],[(28,0),(28,1),(28,2)],[(29,1),(29,3),(29,0)],[(2,3),(3,3),(4,3)],[(0,0),(0,1)]], []]
    case[1] = [[[(27,0),(27,1),(27,3)],[(28,0),(28,1),(28,2)],[(29,1),(29,3),(29,0)],[(0,0),(0,1)]], [[(8,0),(8,1),(8,2)]]]
    case[2] = [[[(27,0),(27,1),(27,3)],[(28,0),(28,1),(28,2)],[(0,0),(0,1)]], [[(8,0),(8,1),(8,2)],[(29,1),(29,3),(29,0)]]]
    case[3]  = [[[(0,0),(0,1)]], [[(27,0),(27,1),(27,3)],[(28,0),(28,1),(28,2)],[(8,0),(8,1),(8,2)],[(29,1),(29,3),(29,0)]]]
    case[4]  = [[[(0,0),(0,1)],[(27,0),(27,1),(27,3)],[(28,0),(28,1),(28,2)],[(8,0),(8,1),(8,2)]],[[(29,1),(29,3),(29,0),(29,2)]]]
    case[5]  = [[[(0,0),(0,1)]], [[(27,0),(27,1),(27,3),(27,2)],[(28,0),(28,1),(28,2),(28,3)],[(8,0),(8,1),(8,2)],[(29,1),(29,3),(29,0),(29,2)]]]
    case[6] = [[[(0,0),(0,1)]], [[(12,0),(12,1),(12,3)],[(28,0),(28,1),(28,2)],[(8,0),(8,1),(8,2)],[(29,1),(29,3),(29,0)]]]
    case[7] = [[],[]]
    
    for test in case[1:]:
        print(showTesthand(test))
        print(JudgeRon.dasanyuan(test[0],test[1]))

def zifengTest():
    case = [""]*6
    case[0] = [[[(30,1),(30,0),(30,2)],[(31,1),(31,2),(31,0)],[(1,1),(2,2),(3,3)],[(8,0),(8,1),(8,2)],[(0,2),(0,3)]], []]
    case[1] = [[[(31,1),(31,2),(31,0)],[(32,1),(32,2),(32,3)],[(33,0),(33,1),(33,2)],[(0,2),(0,3)]], [[(30,1),(30,0),(30,2)]]]
    case[2] = [[[(31,1),(31,2),(31,0)],[(1,1),(2,2),(3,3)],[(8,0),(8,1),(8,2)],[(0,2),(0,3)]], [[(30,1),(30,0),(30,2)]]]
    case[3] = [[[(32,1),(32,2),(32,0)],[(1,1),(2,2),(3,3)],[(8,0),(8,1),(8,2)],[(0,2),(0,3)]], [[(30,1),(30,0),(30,2)]]]
    case[4] = [[[(32,1),(32,2),(32,0)],[(1,1),(2,2),(3,3)],[(8,0),(8,1),(8,2)],[(0,2),(0,3)]], [[(30,1),(30,0),(30,2),(30,3)]]]
    case[5] = [[],[]]

    feng = [30,31,32,33]

    for f in feng:
        for test in case:
            print("ZhiFeng : ",f)
            print(showTesthand(test))
            print(JudgeRon.zifeng(test[0],test[1],f))

def changfengTest():
    case = [""]*6
    case[0] = [[[(30,1),(30,0),(30,2)],[(31,1),(31,2),(31,0)],[(1,1),(2,2),(3,3)],[(8,0),(8,1),(8,2)],[(0,2),(0,3)]], []]
    case[1] = [[[(31,1),(31,2),(31,0)],[(32,1),(32,2),(32,3)],[(33,0),(33,1),(33,2)],[(0,2),(0,3)]], [[(30,1),(30,0),(30,2)]]]
    case[2] = [[[(31,1),(31,2),(31,0)],[(1,1),(2,2),(3,3)],[(8,0),(8,1),(8,2)],[(0,2),(0,3)]], [[(30,1),(30,0),(30,2)]]]
    case[3] = [[[(32,1),(32,2),(32,0)],[(1,1),(2,2),(3,3)],[(8,0),(8,1),(8,2)],[(0,2),(0,3)]], [[(30,1),(30,0),(30,2)]]]
    case[4] = [[[(32,1),(32,2),(32,0)],[(1,1),(2,2),(3,3)],[(8,0),(8,1),(8,2)],[(0,2),(0,3)]], [[(30,1),(30,0),(30,2),(30,3)]]]
    case[5] = [[],[]]

    feng = [30,32]

    for f in feng:
        for test in case:
            print("ChangFeng : ",f)
            print(showTesthand(test))
            print(JudgeRon.changfeng(test[0],test[1],f))

def sanyuanTest():
    case = [""]*8
    case[0] = [[[(27,0),(27,1),(27,3)],[(28,0),(28,1),(28,2)],[(29,1),(29,3),(29,0)],[(2,3),(3,3),(4,3)],[(0,0),(0,1)]], []]
    case[1] = [[[(27,0),(27,1),(27,3)],[(28,0),(28,1),(28,2)],[(29,1),(29,3),(29,0)],[(0,0),(0,1)]], [[(8,0),(8,1),(8,2)]]]
    case[2] = [[[(27,0),(27,1),(27,3)],[(2,0),(2,1),(2,2)],[(0,0),(0,1)]], [[(8,0),(8,1),(8,2)],[(9,1),(9,3),(9,0)]]]
    case[3]  = [[[(0,0),(0,1)]], [[(27,0),(27,1),(27,3)],[(28,0),(28,1),(28,2)],[(8,0),(8,1),(8,2)],[(29,1),(29,3),(29,0)]]]
    case[4]  = [[[(0,0),(0,1)],[(7,0),(7,1),(7,3)],[(2,0),(2,1),(2,2)],[(8,0),(8,1),(8,2)]],[[(29,1),(29,3),(29,0),(29,2)]]]
    case[5]  = [[[(0,0),(0,1)]], [[(25,0),(25,1),(25,3)],[(18,0),(18,1),(18,2),(18,3)],[(8,0),(8,1),(8,2)],[(28,1),(28,3),(28,0),(28,2)]]]
    case[6] = [[[(0,0),(0,1)]], [[(12,0),(12,1),(12,3)],[(3,0),(3,1),(3,2)],[(8,0),(8,1),(8,2)],[(9,1),(9,3),(9,0)]]]
    case[7] = [[],[]]

    for s,f in [("中",JudgeRon.sanyuan_zhong),("發",JudgeRon.sanyuan_fa),("白",JudgeRon.sanyuan_bai)]:
        print("Test: 三元",s)
        for test in case:
            print(showTesthand(test))
            print(f(test[0],test[1]))

def noyaojiuTest():
    case = [""]*9
    case[0] = [[[(1,0),(2,1),(3,3)],[(4,0),(5,1),(6,2)],[(21,1),(21,3),(21,0)],[(10,3),(11,3),(12,3)],[(15,0),(15,1)]], []]
    case[1] = [[[(4,0),(5,1),(6,2)],[(21,1),(21,3),(21,0)],[(10,3),(11,3),(12,3)],[(15,0),(15,1)]], [[(1,0),(2,1),(3,2)]]]
    case[2] = [[[(27,0),(27,1),(27,3)],[(28,0),(28,1),(28,2)],[(33,0),(33,1)]], [[(32,0),(32,1),(32,2)],[(29,1),(29,3),(29,0)]]]
    case[3] = [[[(1,0),(1,1)]], [[(20,0),(20,1),(20,3)],[(21,0),(22,1),(23,2)],[(9,0),(9,1),(9,2)],[(29,1),(29,3),(29,2),(29,0)]]]
    case[4] = [[[(1,0),(1,1)],[(8,0),(8,1),(8,3)],[(28,0),(28,1),(28,2)],[(9,0),(9,1),(9,2)]],[[(29,1),(29,3),(29,0),(29,2)]]]
    case[5] = [[[(0,0),(0,1)]], [[(27,0),(27,1),(27,3),(27,2)],[(28,0),(28,1),(28,2),(28,3)],[(8,0),(8,1),(8,2)],[(29,1),(29,3),(29,0),(29,2)]]]
    case[6] = [[[(0,0),(0,1)]], [[(12,0),(12,1),(12,3)],[(28,0),(28,1),(28,2)],[(10,0),(10,1),(10,2)],[(29,1),(29,3),(29,0)]]]
    case[7] = [[[(2,0),(2,1)],[(1,1),(1,0)],[(3,3),(3,2)],[(4,1),(4,0)],[(5,0),(5,1)],[(20,0),(20,1)],[(13,1),(13,2)]],[]]
    case[8] = [[],[]]

    for test in case:
        print(showTesthand(test))
        print(JudgeRon.noyaojiu(test[0],test[1]))

def sansetkTest():
    case = [""]*5
    case[0] = [[[(0,0),(0,1)],[(2,1),(2,2),(2,3)],[(11,1),(11,2),(11,3)],[(20,1),(20,2),(20,3)],[(4,1),(5,1),(6,1)]],[]]
    case[1] = [[[(31,0),(31,1)],[(3,1),(3,2),(3,3)],[(12,1),(12,2),(12,3)],[(4,1),(4,2),(4,0)]],[[(21,1),(21,2),(21,3),(21,0)]]]
    case[2] = [[[(27,0),(27,1),(27,3)],[(28,0),(28,1),(28,2)],[(33,0),(33,1)]], [[(32,0),(32,1),(32,2)],[(29,1),(29,3),(29,0)]]]
    case[3] = [[[(2,0),(2,1),(2,3)],[(12,0),(12,1),(12,2)],[(33,0),(33,1)]], [[(21,0),(21,1),(21,2)],[(29,1),(29,3),(29,0),(29,2)]]]
    case[4] = [[],[]]
    
    for test in case[:]:
        print(showTesthand(test))
        print(JudgeRon.sansetk(test[0],test[1]))

def sangangziTest():
    case = [""]*5
    case[0] = [[[(0,0),(0,1)],[(1,1),(2,2),(3,3)]],[[(8,0),(8,1),(8,2),(8,3)],[(9,0),(9,1),(9,2),(9,3)],[(17,0),(17,1),(17,2),(17,3)]]]
    case[1] = [[[(0,0),(0,1)],[(1,1),(2,2),(3,3)]],[[(8,0),(8,1),(8,2),(8,3)],[(9,0),(9,1),(9,2),(9,3)],[(17,0),(17,1),(17,2)]]]
    case[2] = [[[(0,0),(0,1)],[(1,1),(2,2),(3,3)],[(9,0),(9,1),(9,2)]],[[(8,0),(8,1),(8,2),(8,3)],[(17,0),(17,1),(17,2),(17,3)]]]
    case[3] = [[[(0,0),(0,1)],[(1,1),(2,2),(3,3)]],[[(8,0),(8,1),(8,2)],[(9,0),(10,1),(11,2)],[(17,0),(17,1),(17,2)]]]
    case[4] = [[],[]]

    for test in case:
        print(showTesthand(test))
        print(JudgeRon.sangangzi(test[0],test[1]))

def sanankeTest():
    case = [""]*8
    case[0] = [[[(0,0),(0,1)],[(2,1),(2,2),(2,3)],[(11,1),(11,2),(11,3)],[(20,1),(20,2),(20,3)],[(4,1),(5,1),(6,1)]],[]]
    case[1] = [[[(0,0),(0,1)],[(2,1),(2,2),(2,3)],[(11,1),(11,2),(11,3)],[(20,1),(20,2),(20,3)]],[[(4,1),(5,1),(6,1)]]]
    case[2] = [[[(0,0),(0,1)],[(2,1),(2,2),(2,3)],[(11,1),(11,2),(11,3)],[(4,1),(5,1),(6,1)]],[[(20,1),(20,2),(20,3),(20,0)]]]
    case[3] = [[[(0,0),(0,1)]],[[(20,1),(20,2),(20,3),(20,0)],[(2,0),(2,1),(2,2),(2,3)],[(11,0),(11,1),(11,2),(11,3)],[(4,1),(5,1),(6,1)]]]
    case[4] = [[[(0,0),(0,1)],[(2,1),(2,2),(2,3)],[(11,1),(11,2),(11,3)],[(20,1),(21,2),(22,3)],[(4,1),(5,1),(6,1)]],[]]
    case[5] = [[[(0,0),(0,1)],[(2,1),(2,2),(2,3)],[(11,1),(11,2),(11,3)],[(4,1),(5,1),(6,1)]],[[(20,1),(20,2),(20,3)]]]
    case[6] = [[[(0,0),(0,1)],[(2,1),(3,2),(4,3)],[(11,1),(11,2),(11,3)],[(4,1),(5,1),(6,1)]],[[(20,1),(20,2),(20,3)]]]
    case[7] = [[],[]]

    for test in case:
        print(showTesthand(test))
        print(JudgeRon.sananke(test[0],test[1]))

def piaoTest():
    case = [""]*8
    case[0] = [[[(0,0),(0,1)],[(2,1),(2,2),(2,3)],[(11,1),(11,2),(11,3)],[(20,1),(20,2),(20,3)],[(4,1),(4,2),(4,0)]],[]]
    case[1] = [[[(0,0),(0,1)],[(2,1),(2,2),(2,3)],[(11,1),(11,2),(11,3)],[(21,1),(21,2),(21,3)]],[[(33,1),(33,3),(33,2)]]]
    case[2] = [[[(0,0),(0,1)],[(2,1),(2,2),(2,3)],[(11,1),(11,2),(11,3)],[(6,2),(6,0),(6,1)]],[[(20,1),(20,2),(20,3),(20,0)]]]
    case[3] = [[[(0,0),(0,1)]],[[(20,1),(20,2),(20,3),(20,0)],[(2,0),(2,1),(2,2),(2,3)],[(11,0),(11,1),(11,2),(11,3)],[(6,0),(6,2),(6,1)]]]
    case[4] = [[[(0,0),(0,1)],[(2,1),(2,2),(2,3)],[(11,1),(11,2),(11,3)],[(20,1),(21,2),(22,3)],[(4,1),(5,1),(6,1)]],[]]
    case[5] = [[[(0,0),(0,1)],[(2,1),(2,2),(2,3)],[(11,1),(11,2),(11,3)],[(4,1),(5,1),(6,1)]],[[(20,1),(20,2),(20,3)]]]
    case[6] = [[[(0,0),(0,1)],[(2,1),(3,2),(4,3)],[(11,1),(11,2),(11,3)],[(4,1),(5,1),(6,1)]],[[(20,1),(20,0),(20,2),(20,3)]]]
    case[7] = [[],[]]

    for test in case:
        print(showTesthand(test))
        print(JudgeRon.piao(test[0],test[1]))

def xiaosanyuanTest():
    case = [""]*8
    case[0] = [[[(27,0),(27,1),(27,3)],[(28,0),(28,1),(28,2)],[(10,1),(10,3),(10,0)],[(2,3),(3,3),(4,3)],[(29,0),(29,1)]], []]
    case[1] = [[[(27,0),(27,1),(27,3)],[(6,0),(7,1),(8,2)],[(29,1),(29,3),(29,0)],[(28,0),(28,1)]], [[(8,0),(8,1),(8,2)]]]
    case[2] = [[[(7,0),(7,1),(7,3)],[(28,0),(28,1),(28,2)],[(27,0),(27,1)]], [[(8,0),(8,1),(8,2)],[(29,1),(29,3),(29,0),(29,2)]]]
    case[3]  = [[[(29,0),(29,1)]], [[(20,0),(21,1),(22,3)],[(28,0),(28,1),(28,2)],[(8,0),(8,1),(8,2)],[(27,1),(27,2),(27,3),(27,0)]]]
    case[4]  = [[[(0,0),(0,1)],[(27,0),(27,1),(27,3)],[(28,0),(28,1),(28,2)],[(8,0),(8,1),(8,2)]],[[(29,1),(29,3),(29,0),(29,2)]]]
    case[5]  = [[[(29,0),(29,1)]], [[(27,0),(27,1),(27,3),(27,2)],[(8,0),(8,1),(8,2),(8,3)],[(9,0),(10,1),(11,2)],[(33,1),(33,3),(33,0),(33,2)]]]
    case[6] = [[[(0,0),(0,1)]], [[(12,0),(12,1),(12,3)],[(28,0),(28,1),(28,2)],[(8,0),(8,1),(8,2)],[(29,1),(29,3),(29,0)]]]
    case[7] = [[],[]]
    
    for test in case[1:]:
        print(showTesthand(test))
        print(JudgeRon.xiaosanyuan(test[0],test[1]))

def hunlaotouTest():
    case = [""]*9
    case[0] = [[[(0,0),(0,1),(0,3)],[(8,0),(8,1),(8,2)],[(9,1),(9,3),(9,0)],[(18,3),(18,3),(18,3)],[(27,0),(27,1)]], []]
    case[1] = [[[(0,0),(0,1),(0,2)],[(9,1),(9,3),(9,0)],[(27,3),(27,3),(27,3)],[(8,0),(8,1)]], [[(31,0),(31,1),(31,2)]]]
    case[2] = [[[(27,0),(27,1),(27,3)],[(28,0),(28,1),(28,2)],[(0,0),(0,1)]], [[(32,0),(32,1),(32,2)],[(29,1),(29,3),(29,0)]]]
    case[3] = [[[(0,0),(0,1)]], [[(8,0),(8,1),(8,3)],[(9,0),(9,1),(9,2)],[(17,0),(17,1),(17,2),(17,3)],[(29,1),(29,3),(29,2),(29,0)]]]
    case[4] = [[[(32,0),(32,1)],[(33,0),(33,1),(33,3)],[(28,0),(28,1),(28,2)],[(27,0),(27,1),(27,2)]],[[(29,1),(29,3),(29,0),(29,2)]]]
    case[5] = [[[(33,0),(33,1)],[(31,1),(31,0)],[(32,3),(32,2)],[(27,1),(27,0)],[(28,0),(28,1)],[(0,0),(0,1)],[(8,1),(8,2)]],[]]
    case[6] = [[[(0,0),(0,1)]], [[(8,0),(8,1),(8,3)],[(9,0),(9,1),(9,2)],[(17,0),(17,1),(17,2)],[(26,1),(26,3),(26,0)]]]
    case[7] = [[[(4,0),(5,1),(6,2)],[(21,1),(21,3),(21,0)],[(10,3),(11,3),(12,3)],[(15,0),(15,1)]], [[(1,0),(2,1),(3,2)]]]
    case[8] = [[],[]]

    for test in case:
        print(showTesthand(test))
        print(JudgeRon.hunlaotou(test[0],test[1]))

if __name__ == "__main__":
    #print("Test: 大三元")
    #dasanyuanTest()
    #print("Test: 自风")
    #zifengTest()
    #print("Test: 场风")
    #changfengTest()
    #print("Test: 三元")
    #sanyuanTest()
    #print("Test: 断幺九")
    #noyaojiuTest()
    #print("Test: 三色同刻")
    #sansetkTest()
    #print("Test: 三杠子")
    #sangangziTest()
    #print("Test: 三暗刻")
    #sanankeTest()
    #print("Test: 対々和")
    #piaoTest()
    #print("Test: 小三元")
    #xiaosanyuanTest()
    print("Test: 混老头")
    hunlaotouTest()